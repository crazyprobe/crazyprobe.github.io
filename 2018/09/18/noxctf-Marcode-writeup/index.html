<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.8.0">
    <title>zer0i3&#39;s Notes</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/init.js"></script>
</head></html>
<body>
    <div class="main-content" id="main-content">
        <div class="hide">
                <div class="hide-inner">
    <!--<div class="search">-->
        <!--<form action="#">-->
            <!--<input type="search" class="form-control" placeholder="Search ...">-->
        <!--</form>-->
    <!--</div>-->
    <div class="nav-menu widget">
        <ul class="navmenu-nav">
            
                <li class="menu-item">
                    <a href="/">Home</a>
                </li>
            
                <li class="menu-item">
                    <a href="/archives/">Archives</a>
                </li>
            
                <li class="menu-item">
                    <a href="/links/">Links</a>
                </li>
            
        </ul>
    </div>
    <div class="tag widget">
        <h3 class="widget-title">Tag</h3>
        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ctf/">ctf</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scrapy/">scrapy</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/writeup/">writeup</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/漏洞/">漏洞</a><span class="tag-list-count">1</span></li></ul>
    </div>
    <div class="categories widget">
        <h3 class="widget-title">Categories</h3>
        <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li></ul>
    </div>
</div>
        </div>
        <div class="show">
            <aside class="left-col">
                <button id="show-all" type="button" class="navbar-toggle">
    <i class="fa fa-bars"></i>
</button>
<div class="profile">
    <div class="avatar">
        <a href="/">
            <img class="img-thumbnail" src="/img/avatar.jpg" alt="">
        </a>
    </div>
    <div class="header-author">
        <a href="/">
            <h1>zer0i3</h1>
        </a>
    </div>
    <hr class="divider">
    <div class="header-subtitle">
        <p class="description">A lot can happen between now and never.</p>
    </div>
    <hr class="divider">
    <div class="social">
        <a href="Mailto:i@aiyo.xyz" class="fa fa-envelope fa-2x"></a>
        <a href="https://github.com/zer0i3" class="fa fa-github fa-2x"></a>
        <a href="/atom.xml" class="fa fa-feed fa-2x"></a>
    </div>
</div>
            </aside>
            <main class="right-col">
                <article class="post">
        <header class="post-header">
            <h1 class="post-title">
                <a href="/2018/09/18/noxctf-Marcode-writeup/">noxctf-Marcode-writeup</a>
            </h1>
            <div class="post-meta">
            <span class="author">
                作者：
                <a href="#">
                    zer0i3
                </a>
            </span>
                <time class="post-date">
                    2018-09-18
                </time>
            </div>
        </header>
        
            <div class="post-content">
                <h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><blockquote>
<p>Marcode (Mr. Code in Hebrew), Ineed your help!<br>I got a movie but I cant see it. It hypnotizes me.<br>please help me!<br>yours,<br>Gveretcode (Mrs. Code in Hebrew)</p>
</blockquote>
<blockquote>
<p>P.S.<br>change NOXCTF to noxCTF.<br><a href="https://drive.google.com/open?id=1GkalBntU1s6d_sw_S5I4GinD8hBrh-C-" target="_blank" rel="noopener">https://drive.google.com/open?id=1GkalBntU1s6d_sw_S5I4GinD8hBrh-C-</a></p>
</blockquote>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>链接地址下载后为一个视频，视频每一帧都是一个二维码，需要逐帧分析视频图片并对结果进行二次操作</p>
<a id="more"></a>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>视频逐帧保存为图片(<em>2种方法</em>)</p>
<ul>
<li><p>FFmpeg<br><code>$ffmpeg -i ffmpeg_test.avi frames_%03d.jpg -hide_banner</code></p>
</li>
<li><p>cv2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">video_full_path=<span class="string">"video/01_01.wmv"</span></span><br><span class="line">cap  = cv2.VideoCapture(video_full_path)</span><br><span class="line"><span class="keyword">print</span> cap.isOpened()</span><br><span class="line">frame_count = <span class="number">1</span></span><br><span class="line">success = <span class="keyword">True</span></span><br><span class="line"><span class="keyword">while</span>(success):</span><br><span class="line">    success, frame = cap.read()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Read a new frame: '</span>, success</span><br><span class="line"> </span><br><span class="line">    params = []</span><br><span class="line">    <span class="comment">#params.append(cv.CV_IMWRITE_PXM_BINARY)</span></span><br><span class="line">    params.append(<span class="number">1</span>)</span><br><span class="line">    cv2.imwrite(<span class="string">"video"</span> + <span class="string">"_%d.jpg"</span> % frame_count, frame, params)</span><br><span class="line"> </span><br><span class="line">    frame_count = frame_count + <span class="number">1</span></span><br><span class="line"> </span><br><span class="line">cap.release()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>解析图片为url</p>
<ul>
<li>python zbar模块</li>
<li><a href="http://pc.wwei.cn/" target="_blank" rel="noopener">批量二维码解析</a> windows、mac版，导出到Excel</li>
</ul>
</li>
<li><p>url转为对应字符</p>
<p>打开url获取对应字符并批量替换</p>
</li>
<li><p>字符组成文字片段</p>
<p>如使用Excel根据序号进行排序，获取排序后的字符</p>
</li>
<li><p>检查片段内容寻找flag</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">THE TWO MEN APPEARED OUT OF NOWHERE A FEW YNARDS APART IN THE NARROW MOONLIT LANE FOR A SECOND THEY STOOD QUITE STOILL WANDS DIRECTED AT EACH OTHERS CHESTS THEN RECOGNIZING EACH OTHER THEY STOWED THEIR WANDS BENEATH THEIR CLOAKS AND STARTED WALKING BRISKLY IN THE SAME DIRECTION NEWS ASKED THE TALLEXR OF THE TWO THE BEST REPLIED SEVERUS SNAPE THE LANE WAS BORDERED ON THE LEFT BY WILD LOWGROWING BRAMBLES ON THE RIGHT BY A HICGH NEATLY MANICURED HEDGE THE MENS LONG CLOAKS FLAPPED AROUND THEIR ANKLES AS THEY MARCHED THOUGHT I MIGHTT BE LATE SAID YAXLEY HIS BLUNT FEATURES SLIDING IN AND OUT OF SIGHT AS THE BRANCHES OF OVERHANGING TREES BROKE THE MOONLIGHT IT WAS A LITTLE TRICKIER THAN I EXPECTEFD BUT I HOPE HE WILL BE SATISFIED YOU SOUND CONFIDENT THAT YOUR RECEPTION WILL BE GOOD SNAPE NODDED BUT DID NOT ELABORATE THEY TURNED RIGHT INTO A WIDE DRIVAEWAY THAT LED OFF THE LANE THE HIGH HEDGE CURVED INTO THEM RUNNIVNG OFF INTO THE DISTANCE BEYOND THE PIR OF IMPAOSING WROUGHTIRON GATES BARRING THE MENS WAY NEITDHER OF THEM BROKE STEP IN SILENCE BOTH RAISED THEIR LEFT ARMS IN A KIND OF SALAUTE AND PASSED STRAIGHT THROUGH AS THOUGH THE DARK METAL WAS SMOKE THE YEW HEDGES MUFFLED THE SOKUND OF THE MENS FOOTSTEPS THERE WAS A RUSTLE SOMEWHERE TO THEIR RIGHT YAXLEY DREW HIS WAND AGAIN POINTING IT OVER HIS COMPANIONS HEAD BUT THE SOURCE OF THE NOISE PROVED TO BE NOTHING MORE THAN A PUREWHITE PEACOCK STERUTTING MAJESTICALLY ALONG THE TOP OF THE HEDGE HE ALWAYS DID HIMSELF WELL LUCIUS PEACOCKS YAXLEY THRUST HIS WAND BADCK UNDER HIS CLOAK WITH A SNORT A HANDSOME MANOR HOUSE GREW OUT OF THE DARKNESS AT THE END OF THE STRAIGHT DRIVE LIGHTS GLINTING IN THE DIAMOND PANED DOWNSTAAIRS WINDOWS SOMEWHERE IN THE DARK GARDEN BEYOND THE HEDGE A FOUNTAIN WAS PLAYING GRAVEL CRACKLED BENEATH THEIR FEET AS SNAPE AND YAXLEY SPED TOWARD THE FRONT DOOR WHICH SWUNG INWARD AT THEIR APPROACH THOUGH NOBODY HAD VISIBLY OPENED VIT THE HALLWAY WAS LARGE DIMLY LIT AND SUMPTUOUSLY DECORATED WITH A MAGNIFICENT CARPET COVERING MOST OF THE STONE FLOOR THE EYES OF THE PALEFACED PORTRAITS ON THE WALL FOLLOWED SNAPE AND YAXLEY AS THEY STRODE PAST THE TWO MEN HALTED AT A HEAVY WOODEN DOOR LEADING INTO THE NEXT ROOM HESITATED FOR THE SPACE OF A HEARTBEAT THEN SNAPE TURNED THE BRONZE HANDLE THE DRAWING ROOM WAS FULL OF SILENT PREOPLE SITTING AT A LONG AND ORNATE TABLE THE ROOMS USUAL FURNITURE HAD BEEN PUSHED CARELESSLY UP AGAINST THE WALLS ILLUMINATION CAME FROM A ROARING FIRE BENEATH A HANDSOME MARBLE MANTELPIECE SURMOUNTED BY A GILDED MIRROR SNAPE AND YAXLEY LINGERED FOR A MOMENT ON THE THRESHOLD AS THEIR EYES GREW ACCUSTOMED TO THE LACK OF LIGHT THEY WERE DRAWN UPWARD TO THE STRANGEST FEATURE OF THE SCENE AN APPARENTLY UNCONSCIOUS HUMAN FIGURE HANGING UPSIDE DOWN OVER THE TABLE REVOLVING SLOWLY AS IF SUSPENDED BY AAN INVISIBLE ROPE AND REFLECTED IN THE MIRROR AND IN THE BARE POLISHED SURFACE OF THE TABLE BELOW NONE OF THE PEOPLE SEATED UNDERNEATH THIS SINGULAR SIGHT WERE LOOKING AT IT EXCEPT FOR A PALE YOUNG MAN SITTING ALMOST DIRECTLY BELOW IT HE SEEMED UNABLE TO PREVENT HIMSELF FROM GLANCING UPWARD EVERY MINUTE OR SO YAXLEY SNAPE SAID A HIGH CLEAR VOICE FROM THE HEAD OF THE TABLE YOU ARE VERY NEARLY LATE THE SPEAKER WAS SEATED DIRECTLY IN FRONT OF THE FIREPLACE SO THAT IT WAS DIFFICULT AT FIRST FOR THE NEW ARRIVALS TO MAKE OUT MORE THAN HIS SILHOUETTE</span><br></pre></td></tr></table></figure>
<ul>
<li>对照原文</li>
<li>语法检查</li>
</ul>
</li>
</ol>
<h3 id="Flag"><a href="#Flag" class="headerlink" title="Flag"></a>Flag</h3><p>flag:<strong>noxCTF{AVADAKEDAVRA}</strong></p>

            </div>
          
        
            <footer class="post-footer">
                <class class="pull-left tag-list">
                    <i class="fa fa-folder-open-o"></i>
                    
                        <a href="/tags/ctf/">ctf</a>
                      
                        <a href="/tags/writeup/">writeup</a>
                      
                </class>
            </footer>
        
</article>
                <footer class="footer-info">
    <div class="footer-left">
        <i class="fa fa-copyright"></i>2019 zer0i3
    </div>
    <div class="footer-right">
        <a href="https://hexo.io">Hexo</a>
        <span>Theme</span>
        <a href="https://github.com/zer0i3/hexo-theme-zob">zob</a>
        <span>by <i class="fa fa-heart"></i>zer0i3</span>
    </div>
</footer>
            </main>
        </div>
    </div>
</body>
</html>